FROM gcfntnu/python-base-conda:23.10.0-1

RUN apt-get update --fix-missing && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y \
    build-essential \
    gawk \
    less \
    unzip \
    p7zip-full \
    git && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*


RUN mamba install -y python=3.9 pandas pyyaml openpyxl jinja2 scipy lxml html5lib matplotlib pytables pyreadstat tabulate zlib blosc fsspec numba pyarrow fastparquet gcsfs s3fs beautifulsoup4 bottleneck numexpr pyqt snakemake csvkit upsetplot

RUN pip install pyxcelframe

RUN conda clean -afy \
    && find /opt/conda/ -follow -type f -name '*.a' -delete \
    && find /opt/conda/ -follow -type f -name '*.pyc' -delete \
    && find /opt/conda/ -follow -type f -name '*.js.map' -delete